

== HOW TO USE IN JAVASCRIPT AS JSON ==

- url: http://path.to.this/folder/?uid=MyName|127.0.0.1|80.100.192.168|Krinkle&pages=Main%20Page|Wikipedia&raw=0&format=json&jsoncallback=MyFunction

- AJAX Example in jQuery with an array of usernames:

<code>

	// We're going to check the cvndb status of the following users and pages
	var userArr = ['MyName', '127.0.0.1', '80.100.192.168', 'Krinkle'];
	var pageArr = ['Main Page', 'MyArticle'];

	try { // Parsing json could cause fatal error if url is not HTTP 200 OK (ie. HTML 404 Error)
	jQuery.ajax({
		url: 'http://path.to.this/folder/?uid='+userArr.join('|')+'&pages='+pageArr.join('|')+'&raw=0&jsoncallback=?',
		dataType: 'json',
		success: function (data) {

			alert( data.users['MyName'].reason ); // retuens reason for addition to list
			alert( data.users['MyName'].adder ); // returns username of blacklist adder
			alert( data.users['MyName'].usertype); // returns 'bl' if blacklisted, else 'oo'
			alert( data.users['MyName'].expiry); // returns 'the end of time' if listed '0', else eg. 'Thu, 29 December 2011 12:17'
			alert( data.pages['Main Page'].reason ); // returns reason for watchlist addition
			alert( data.pages['Main Page'].reason ); // returns username of blacklist adder

		},
		error: function (data) {

		}
	});
	} catch(e) {

	}

</code>

== HOW TO USE IN PHP ==

- url: http://path.to.this/file/?uid=MyName|127.0.0.1|80.100.192.168|Krinkle&pages=Main%20Page|Wikipedia&raw=0&format=php

- simple example using PHP's file_get_contents()

<code>
<?php

	// We're going to check the cvndb status of the following users and pages
	$userArr = array('MyName', '127.0.0.1', '80.100.192.168', 'Krinkle');
	$pageArr = array('Main Page', 'MyArticle');

	$result = file_get_contents('http://path.to.this/file/?format=php&raw=0&uid='.join('|')+'&pages='+pageArr.join('|')+'&raw=0&format=php');
	$data = unserialise($result);

	var_dump($data);

	echo $data['users']['MyName']['reason']; // returns reason for addition to list
	echo $data['users']['MyName']['adder']; // returns username of blacklist adder
	echo $data['users']['MyName']['usertype']; // returns 'bl' if blacklisted, else 'oo'
	echo $data['users']['MyName']['expiry']; // // returns 'the end of time' if listed '0', else eg. 'Thu, 29 December 2011 12:17'
	echo $data['pages']['Main Page']['reason']; // returns reason for watchlist addition
	echo $data['pages']['Main Page']['reason']; // returns username of blacklist adder

?>
</code>
